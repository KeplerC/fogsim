<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Simulation Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body class="bg-dark text-light">
    <div class="container-fluid py-3">
        <h1 class="text-center mb-4">A Plan for System Simulation â€“ Dashboard</h1>
        
        <div class="row g-3 mb-4">
            <!-- Road Conditions -->
            <div class="col-md-3">
                <div class="card bg-secondary text-light">
                    <div class="card-header">
                        <h5 class="card-title">Road</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="weather" class="form-label">Weather</label>
                            <select id="weather" class="form-select">
                                <option value="Clear">Clear</option>
                                <option value="Rain">Rain</option>
                                <option value="Fog">Fog</option>
                                <option value="Snow">Snow</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="trafficDensity" class="form-label">Traffic Density</label>
                            <input type="range" class="form-range" id="trafficDensity" min="0" max="1" step="0.1" value="0.5">
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Network Parameters -->
            <div class="col-md-3">
                <div class="card bg-secondary text-light">
                    <div class="card-header">
                        <h5 class="card-title">Network</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="latency" class="form-label">Latency</label>
                            <div class="input-group">
                                <input type="number" id="latency" class="form-control" value="50" min="0" max="1000">
                                <span class="input-group-text">ms</span>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="packetLoss" class="form-label">Packet Loss</label>
                            <div class="input-group">
                                <input type="number" id="packetLoss" class="form-control" value="2" min="0" max="100">
                                <span class="input-group-text">%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Computation Parameters -->
            <div class="col-md-3">
                <div class="card bg-secondary text-light">
                    <div class="card-header">
                        <h5 class="card-title">Computation</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="processingPower" class="form-label">Processing Power</label>
                            <input type="range" class="form-range" id="processingPower" min="0" max="1" step="0.1" value="0.6">
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Algorithm Selection -->
            <div class="col-md-3">
                <div class="card bg-secondary text-light">
                    <div class="card-header">
                        <h5 class="card-title">Algorithms</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="perception" class="form-label">Perception</label>
                            <select id="perception" class="form-select">
                                <option value="Algorithm A">Algorithm A</option>
                                <option value="Algorithm B">Algorithm B</option>
                                <option value="Algorithm C">Algorithm C</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="planning" class="form-label">Planning</label>
                            <select id="planning" class="form-select">
                                <option value="Algorithm A">Algorithm A</option>
                                <option value="Algorithm B">Algorithm B</option>
                                <option value="Algorithm C">Algorithm C</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Control buttons -->
        <div class="row mb-4">
            <div class="col-12 text-center">
                <button id="startBtn" class="btn btn-success me-2">Start Simulation</button>
                <button id="stopBtn" class="btn btn-danger me-2" disabled>Stop Simulation</button>
                <button id="resetBtn" class="btn btn-warning me-2">Reset Simulation</button>
                <button id="applySettingsBtn" class="btn btn-primary">Apply Settings</button>
            </div>
        </div>
        
        <!-- Simulation Visualization -->
        <div class="row mb-3">
            <div class="col-12">
                <div class="card bg-secondary text-light">
                    <div class="card-header">
                        <h5 class="card-title">Simulation from Carla</h5>
                    </div>
                    <div class="card-body text-center">
                        <div class="simulation-container">
                            <img id="simulationFrame" src="" alt="Simulation Frame" class="img-fluid rounded">
                            <div id="riskIndicator" class="risk-indicator">
                                Current risk: <span id="riskValue">0.15</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Network Metrics -->
        <div class="row">
            <div class="col-md-6">
                <div class="card bg-secondary text-light">
                    <div class="card-header">
                        <h5 class="card-title">Round-trip Latency</h5>
                    </div>
                    <div class="card-body">
                        <canvas id="latencyChart" height="200"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card bg-secondary text-light">
                    <div class="card-header">
                        <h5 class="card-title">Network Metrics</h5>
                    </div>
                    <div class="card-body">
                        <table class="table table-dark">
                            <tbody>
                                <tr>
                                    <th>Current Round-trip Latency:</th>
                                    <td id="currentRoundTripLatency">0 ms</td>
                                </tr>
                                <tr>
                                    <th>Avg. Observation Latency:</th>
                                    <td id="avgObservationLatency">0 ms</td>
                                </tr>
                                <tr>
                                    <th>Avg. Action Latency:</th>
                                    <td id="avgActionLatency">0 ms</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html> 